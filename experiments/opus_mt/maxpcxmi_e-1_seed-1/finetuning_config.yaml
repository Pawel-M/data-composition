results_dir: .
results_suffix: null
tokenizer_name: 'opusmt-ende-ctx'
model_path: ../baseline_seed-1/model
tokenizer_path: ../baseline_seed-1/tokenizer
max_length: 512
src_ctx_size: 3
tgt_ctx_size: 3
lang_pairs:
  - "en-de"
src_lang: "en"
tgt_lang: "de"
seed: 1
datasets:
  -
    dataset_name: iwslt2017
    dataset_splits: [train]
    dataset_path: path/to/repo/data/hf_iwslt17
    dataset_annotation_path: path/to/repo/data/iwslt2017_ctxpro
    sample_ctx_size: false
    lang_pairs:
      - "en-de"

#pcxmi
#max_token_pcxmi
#avg_token_pcxmi
metrics_arguments:
  batch_size: 32
  metric: max_token_pcxmi
  limit_size: 30_000

training_arguments:
  optim: adafactor
  learning_rate: 0.00001
  lr_scheduler_type: inverse_sqrt
  warmup_ratio: 0.1
  per_device_train_batch_size: 16
  per_device_eval_batch_size: 16
  gradient_accumulation_steps: 32
  weight_decay: 0.01
  save_total_limit: 1
  num_train_epochs: 1
  fp16: true
freeze: false
